<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
		template="../WEB-INF/templates/main.xhtml"
		xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
		xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
		xmlns:f="http://xmlns.jcp.org/jsf/core">

  <ui:define name="title">Profile</ui:define>
  <ui:define name="body">
	<section id="contact-us" class="contact-us section">
	  <div class="container">
		<div class="contact-head">
		  <div class="row">
			<div class="col-12">
			  <div class="section-title">
				<h2>Profile</h2>
			  </div>
			</div>
		  </div>
		  <div class="contact-info">
			<div class="row">
			  <div class="col-5">
				<div class="mb-3">
				  <label>Display name:</label>
				  <p>#{loggedUser.displayName}</p>
				</div>
				<div class="mb-3">
				  <label>Email:</label>
				  <p>#{loggedUser.email}</p>
				</div>
				<div class="mb-3">
				  <label>Account created:</label>
				  <p>#{loggedUser.accountCreationDate}</p>
				</div>
			  </div>
			  <div class="container-fluid">
				<h5>Orders</h5>
				<h:dataTable styleClass="table table-striped align-middle" value="#{orderService.ordersForUser}" var="order">
				  <h:column>
					<f:facet name="header">Date ordered:</f:facet>
					#{order.orderDate}
				  </h:column>
				  <h:column>
					<f:facet name="header">User details:</f:facet>
					#{order.userDetails}
				  </h:column>
				  <h:column>
					<f:facet name="header">Delivery address:</f:facet>
					#{order.deliveryAddress}
				  </h:column>
				  <h:column>
					<f:facet name="header">Payment method:</f:facet>
					#{order.paymentMethod}
				  </h:column>
				  <h:column>
					<f:facet name="header">Total:</f:facet>
					#{order.total}
				  </h:column>
				  <h:column>
					<f:facet name="header">Action</f:facet>
					<h:link styleClass="btn btn-info" value="More details" outcome="#{userNavigation.orderDetails()}">
					  <f:param name="id" value="#{order.orderID}" />
					</h:link>
				  </h:column>
				</h:dataTable>
			  </div>
			</div>
		  </div>
		</div>
	  </div>
	</section>
  </ui:define>
</ui:composition>
